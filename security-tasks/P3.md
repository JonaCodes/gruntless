# P3: Lower Priority Improvements

---

## 1. Session Management

**Files:** Auth service

**Issue:** No explicit session timeout or refresh token mechanism visible.

**Why Matters:** Long-lived JWTs can't be revoked. If token stolen, stays valid
until expiration.

**Solution:** Implement refresh tokens with short-lived access tokens. Store
refresh tokens with revocation capability.

---

## 2. Password Complexity Requirements

**Files:** Supabase Auth configuration

**Issue:** Password requirements not visible in codebase (likely handled by
Supabase).

**Why Matters:** Weak passwords are easily compromised.

**Solution:** Verify Supabase auth is configured with:

- Min 12 characters
- Complexity requirements
- Common password blocklist

---

## 3. API Documentation

**Files:** N/A

**Issue:** No OpenAPI/Swagger docs for API endpoints.

**Why Matters:** Harder to spot security issues without documented contracts.
Developers might misuse APIs.

**Solution:** Add OpenAPI spec or Swagger documentation for all endpoints with:

- Required auth
- Input validation rules
- Expected responses

---

## 4. Security Headers for Static Assets

**Files:** Vite/build configuration

**Issue:** Security headers might not be applied to static assets served by
CDN/Vite.

**Why Matters:** Static assets could be cached insecurely or embedded in
iframes.

**Solution:** Configure Vite to add security headers to static assets in
production builds.

---

## 5. Environment Variable Validation

**Files:** `server/config`, various files using `process.env`

**Issue:** No validation that required environment variables are set at startup.

**Why Matters:** App might start with missing config and fail unpredictably.
Security settings might be disabled.

**Solution:** Add startup validation:

```typescript
const requiredEnvVars = ['DATABASE_URL', 'JWT_SECRET', 'SUPABASE_URL'];
requiredEnvVars.forEach((v) => {
  if (!process.env[v]) throw new Error(`Missing ${v}`);
});
```
